Index: network_io/win32/sockets.c
===================================================================
--- network_io/win32/sockets.c	(revision 408977)
+++ network_io/win32/sockets.c	(working copy)
@@ -112,7 +112,7 @@
      * purposes, always transform the socket() created as a non-inherited
      * handle
      */
-#if APR_HAS_UNICODE_FS
+#if APR_HAS_UNICODE_FS && !defined(_WIN32_WCE)
     IF_WIN_OS_IS_UNICODE {
         /* A different approach.  Many users report errors such as 
          * (32538)An operation was attempted on something that is not 
@@ -127,7 +127,7 @@
                              HANDLE_FLAG_INHERIT, 0);
     }
 #endif
-#if APR_HAS_ANSI_FS
+#if APR_HAS_ANSI_FS || defined(_WIN32_WCE)
     ELSE_WIN_OS_IS_ANSI {
         HANDLE hProcess = GetCurrentProcess();
         HANDLE dup;
